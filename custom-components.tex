% Enterprise JSF project.
%
% Copyright 2022 e-Contract.be BV. All rights reserved.
% e-Contract.be BV proprietary/confidential. Use is subject to license terms.

\chapter{Custom Components}

\section{Tag Library}

We structure the application as deployable EAR.

Parent POM of our project.
\lstinputlisting[language=XML]{helloworld-ear/pom.xml}

The POM of our tag library JAR module looks as follows.
\lstinputlisting[language=XML]{helloworld-ear/taglib/pom.xml}

The POM of our WAR module looks as follows.
\lstinputlisting[language=XML]{helloworld-ear/war/pom.xml}

The content of the WAR is similar to the initial example.

The POM of our deployable EAR module looks as follows.
\lstinputlisting[language=XML]{helloworld-ear/ear/pom.xml}

The tag library itself is a regular JAR with some additional structure.
The most important file here is our \texttt{src/main/resources/META-INF/ejsf.taglib.xml} tag library descriptor file:
\lstinputlisting[language=XML]{helloworld-ear/taglib/src/main/resources/META-INF/ejsf.taglib.xml}
You can name this file anyway you want, as long as it ends with \texttt{.taglib.xml}.

Compile the example via:
\begin{lstlisting}[language=bash]
	cd helloworld-ear
	mvn clean install
\end{lstlisting}

Deploy the \texttt{helloworld-ear} EAR to the application server via:
\begin{lstlisting}[language=bash]
	cd ear
	mvn wildfly:deploy
\end{lstlisting}

Check out the deployed application within a web browser by navigating to:

http://localhost:8080/helloworld-ear/

\section{Validator}

We start off with our first custom JSF component, a validator.
\lstinputlisting[language=Java]{helloworld-ear/taglib/src/main/java/be/e_contract/jsf/taglib/ExampleValidator.java}

Notice that we register this custom validator within our \texttt{.taglib.xml} tag library descriptor.

Example usage of our custom validator is given below.
\lstinputlisting[language=XML]{helloworld-ear/war/src/main/webapp/validation.xhtml}

\subsection{Validator Parameters}

The custom JSF  validator with a parameter attribute looks as follows.
\lstinputlisting[language=Java]{helloworld-ear/taglib/src/main/java/be/e_contract/jsf/taglib/ParameterValidator.java}

Notice that we register this custom validator within our \texttt{.taglib.xml} tag library descriptor.

Example usage of our custom validator is given below.
\lstinputlisting[language=XML]{helloworld-ear/war/src/main/webapp/validation-parameter.xhtml}

\section{Output Component}

\section{Input Component}

\section{AJAX Events}

\section{Tag Handlers}

\section{Composites}

\subsection{Backing Component}